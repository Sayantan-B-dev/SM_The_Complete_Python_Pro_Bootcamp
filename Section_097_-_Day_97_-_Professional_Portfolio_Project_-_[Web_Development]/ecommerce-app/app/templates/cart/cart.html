{% extends "base.html" %}

{% block title %}Your Cart - Art Ecom{% endblock %}

{% block content %}
<h1 class="text-5xl font-light mb-8">Your Cart</h1>
<div class="glass-card p-8 fade-in">
    {% if items %}
    <div class="space-y-4">
        {% for item in items %}
        <div class="flex items-center gap-4 border-b border-white/10 pb-4">
            <img src="{{ item.image_url }}" alt="{{ item.name }}" class="w-20 h-20 object-cover rounded-xl">
            <div class="flex-1">
                <h3 class="text-xl">{{ item.name }}</h3>
                <p class="text-white/60">${{ item.price }} x {{ item.quantity }}</p>
                <p class="text-white/80">Subtotal: ${{ item.subtotal }}</p>
            </div>
            <form action="{{ url_for('cart.update_cart', product_id=item.product_id) }}" method="post" class="flex items-center gap-2">
                <input type="number" name="quantity" value="{{ item.quantity }}" min="0" max="{{ item.stock }}" class="w-20">
                <button type="submit" class="btn-secondary">Update</button>
            </form>
            <form action="{{ url_for('cart.remove_from_cart', product_id=item.product_id) }}" method="post">
                <button type="submit" class="text-white/40 hover:text-white">Remove</button>
            </form>
        </div>
        {% endfor %}
    </div>
    <div class="mt-8 flex justify-between items-center">
        <span class="text-2xl">Total: ${{ total }}</span>
        {% if current_user.is_authenticated %}
            <a href="{{ url_for('payment.checkout') }}" class="btn-primary">Proceed to Checkout</a>
        {% else %}
            <p class="text-white/60">Please <a href="{{ url_for('auth.login') }}" class="underline">login</a> to checkout.</p>
        {% endif %}
    </div>
    {% else %}
    <p class="text-white/40">Your cart is empty.</p>
    {% endif %}
</div>
{% endblock %}